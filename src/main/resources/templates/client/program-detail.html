<!DOCTYPE html>
<html lang="en" layout:decorate="~{fragments/_layout}" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
    <title>Program Details</title>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="keywords">
    <meta content="" name="description">
    <th:block layout:fragment="styles">
        <style>
            :root {
                --primary: #4169E1;      /* Royal Blue */
                --primary-dark: #2A4CB9; /* Darker Blue */
                --secondary: #F0F8FF;    /* Alice Blue */
                --accent: #7B68EE;       /* Medium Slate Blue */
                --text-color: #333333;
                --light-bg: #F8F9FA;
            }

            .page-header {
                background: linear-gradient(rgba(0, 29, 35, 0.7), rgba(0, 29, 35, 0.7)), url([[@{/img/carousel-1.jpg}]]) center center no-repeat;
                background-size: cover;
                padding: 120px 0;
            }

            .progress-bar {
                background: linear-gradient(to right, var(--primary), var(--primary-dark));
                height: 100%;
                border-radius: 5px;
            }

            .btn-primary {
                background: linear-gradient(to right, var(--primary), var(--primary-dark));
                border: none;
                transition: all 0.3s ease;
            }

            .btn-primary:hover {
                transform: translateY(-3px);
                box-shadow: 0 10px 20px rgba(65, 105, 225, 0.3);
            }

            .modal-content {
                border: none;
                border-radius: 15px;
                box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
            }

            .modal-header {
                border-bottom: 1px solid rgba(0, 0, 0, 0.1);
                background: linear-gradient(to right, var(--primary), var(--primary-dark));
                color: white;
                border-radius: 15px 15px 0 0;
            }

            .modal-footer {
                border-top: 1px solid rgba(0, 0, 0, 0.1);
                background: var(--light-bg);
                border-radius: 0 0 15px 15px;
            }

            .amount-btn {
                min-width: 100px;
                transition: all 0.3s ease;
                background-color: var(--light-bg);
                border: 2px solid var(--primary);
                color: var(--primary);
                font-weight: 600;
            }

            .amount-btn.active {
                background-color: var(--primary);
                color: white;
                transform: translateY(-2px);
                box-shadow: 0 5px 10px rgba(65, 105, 225, 0.2);
            }

            .amount-btn:hover {
                transform: translateY(-2px);
                box-shadow: 0 5px 10px rgba(65, 105, 225, 0.2);
            }

            #amount {
                font-size: 1.2rem;
                font-weight: 500;
            }
            
            .program-detail-card {
                border: none;
                border-radius: 20px;
                overflow: hidden;
                box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
                transition: all 0.3s ease;
            }
            
            .program-detail-card:hover {
                box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
                transform: translateY(-5px);
            }
            
            .card-img-overlay-gradient {
                position: absolute;
                bottom: 0;
                left: 0;
                right: 0;
                height: 50%;
                background: linear-gradient(to top, rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0));
                padding: 20px;
                display: flex;
                flex-direction: column;
                justify-content: flex-end;
            }
            
            .badge {
                font-size: 0.85rem;
                font-weight: 500;
                letter-spacing: 0.5px;
            }
            
            .badge.bg-primary {
                background-color: var(--primary) !important;
            }
            
            .badge.bg-warning {
                background-color: #FFC107 !important;
            }
            
            .stats-card {
                border-radius: 15px;
                border: none;
                background-color: var(--light-bg);
                transition: all 0.3s ease;
            }
            
            .stats-card:hover {
                transform: translateY(-5px);
                box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            }
            
            .stats-value {
                font-size: 2rem;
                font-weight: 700;
                color: var(--primary);
                margin-bottom: 0.5rem;
            }
            
            .stats-label {
                font-size: 0.9rem;
                color: #6c757d;
                font-weight: 500;
            }
            
            .progress {
                height: 12px;
                border-radius: 10px;
                background-color: #e9ecef;
                overflow: hidden;
                margin: 1.5rem 0;
            }
            
            .rounded-pill-btn {
                border-radius: 50px;
                padding: 15px 40px;
                font-weight: 600;
                letter-spacing: 0.5px;
                text-transform: uppercase;
                box-shadow: 0 8px 15px rgba(65, 105, 225, 0.2);
            }
            
            .rounded-pill-btn:hover {
                box-shadow: 0 12px 20px rgba(65, 105, 225, 0.3);
            }
            
            .donate-section {
                background-color: var(--secondary);
                border-radius: 20px;
                padding: 2rem;
                margin-top: 3rem;
            }
            
            .program-description {
                font-size: 1.1rem;
                line-height: 1.8;
                color: #4a4a4a;
            }
            
            .info-section {
                border-left: 4px solid var(--primary);
                padding-left: 20px;
                margin: 30px 0;
                background-color: var(--secondary);
                padding: 20px;
                border-radius: 0 15px 15px 0;
            }
            
            .donor-avatar {
                width: 50px;
                height: 50px;
                border-radius: 50%;
                object-fit: cover;
                border: 2px solid white;
                box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            }
            
            .donor-list {
                display: flex;
                margin-bottom: 20px;
            }
            
            .donor-list .donor-avatar {
                margin-left: -15px;
            }
            
            .donor-list .donor-avatar:first-child {
                margin-left: 0;
            }
            
            .donor-count {
                width: 50px;
                height: 50px;
                border-radius: 50%;
                background-color: var(--light-bg);
                color: var(--primary);
                display: flex;
                justify-content: center;
                align-items: center;
                font-weight: 600;
                margin-left: -15px;
                border: 2px solid white;
                box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            }
            
            /* Animation */
            @keyframes pulse {
                0% {
                    transform: scale(1);
                }
                50% {
                    transform: scale(1.05);
                }
                100% {
                    transform: scale(1);
                }
            }
            
            .btn-donate-now {
                animation: pulse 2s infinite;
            }
            
            .content-section {
                margin-top: 2rem;
                margin-bottom: 2rem;
            }
            
            .section-title {
                position: relative;
                padding-bottom: 15px;
                margin-bottom: 30px;
            }
            
            .section-title:after {
                content: '';
                position: absolute;
                bottom: 0;
                left: 0;
                width: 80px;
                height: 3px;
                background: var(--primary);
                border-radius: 10px;
            }
            
            .tab-content {
                padding: 30px;
                background: white;
                border-radius: 0 15px 15px 15px;
                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            }
            
            .nav-tabs .nav-item .nav-link {
                font-weight: 600;
                color: #495057;
                border: none;
                padding: 15px 30px;
            }
            
            .nav-tabs .nav-item .nav-link.active {
                color: var(--primary);
                background-color: white;
                border-top-left-radius: 15px;
                border-top-right-radius: 15px;
                border-bottom: 3px solid var(--primary);
            }
            
            /* Timeline style */
            .timeline {
                position: relative;
                padding: 20px 0 20px;
                list-style: none;
                margin: 0;
            }

            .timeline:before {
                content: " ";
                position: absolute;
                top: 0;
                bottom: 0;
                left: 50%;
                width: 3px;
                margin-left: -1.5px;
                background-color: #e9ecef;
            }

            .timeline > li {
                position: relative;
                margin-bottom: 20px;
            }

            .timeline > li:after,
            .timeline > li:before {
                content: " ";
                display: table;
            }

            .timeline > li:after {
                clear: both;
            }

            .timeline > li > .timeline-panel {
                float: left;
                position: relative;
                width: 46%;
                padding: 20px;
                border-radius: 8px;
                background-color: white;
                box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
            }

            .timeline > li > .timeline-panel:before {
                position: absolute;
                top: 26px;
                right: -15px;
                display: inline-block;
                border-top: 15px solid transparent;
                border-left: 15px solid white;
                border-right: 0 solid white;
                border-bottom: 15px solid transparent;
                content: " ";
            }

            .timeline > li > .timeline-badge {
                color: #fff;
                width: 50px;
                height: 50px;
                line-height: 50px;
                text-align: center;
                position: absolute;
                top: 16px;
                left: 50%;
                margin-left: -25px;
                background-color: var(--primary);
                z-index: 100;
                border-radius: 50%;
                border: 3px solid white;
                box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            }

            .timeline > li.timeline-inverted > .timeline-panel {
                float: right;
            }

            .timeline > li.timeline-inverted > .timeline-panel:before {
                border-left-width: 0;
                border-right-width: 15px;
                left: -15px;
                right: auto;
            }

            .timeline-title {
                margin-top: 0;
                color: inherit;
                font-weight: 600;
            }

            .timeline-date {
                display: block;
                color: #6c757d;
                margin-bottom: 8px;
                font-size: 0.85rem;
            }
        </style>
    </th:block>
</head>

<body>
    <main layout:fragment="content">
        <!-- Hero Section -->
        <div class="container-fluid page-header mb-5 wow fadeIn" data-wow-delay="0.1s">
            <div class="container text-center">
                <h1 class="display-4 text-white animated slideInDown mb-4" th:text="${program.name}">Program Name</h1>
                <nav aria-label="breadcrumb animated slideInDown">
                    <ol class="breadcrumb justify-content-center mb-0">
                        <li class="breadcrumb-item"><a class="text-white" href="/">Home</a></li>
                        <li class="breadcrumb-item"><a class="text-white" href="/program">Programs</a></li>
                        <li aria-current="page" class="breadcrumb-item text-primary active" th:text="${program.name}">Program Name</li>
                    </ol>
                </nav>
            </div>
        </div>

        <!-- Main Content -->
        <div class="container-xxl py-5">
            <div class="container">
                <div class="row g-5">
                    <!-- Left Column - Program Details -->
                    <div class="col-lg-8">
                        <!-- Program Card with Enhanced Styling -->
                        <div class="program-detail-card">
                            <div class="position-relative">
                                <img alt="Program image" class="card-img-top" th:src="${program.image}" style="height: 500px; object-fit: cover; width: 100%" />
                                <div class="card-img-overlay-gradient">
                                    <div class="d-flex justify-content-between">
                                        <span class="badge bg-primary px-3 py-2 rounded-pill">Active Campaign</span>
                                        <span class="badge bg-warning text-dark px-3 py-2 rounded-pill">
                                            <i class="far fa-clock me-1"></i>
                                            <span th:text="${program.remainingDays}">30</span> Days Left
                                        </span>
                                    </div>
                                </div>
                            </div>

                            <div class="card-body p-4">
                                <!-- Program Title -->
                                <h2 class="card-title mb-4 fw-bold" th:text="${program.name}">Program Name</h2>
                                
                                <!-- Progress Section -->
                                <div class="bg-light p-4 rounded-3 mb-4">
                                    <div class="d-flex justify-content-between mb-3">
                                        <h4 class="mb-0">
                                            <span class="fw-bold text-primary" th:text="${@amountFormatter.formatAmount(program.currentAmount)}">6,699,367</span>
                                            <small class="text-muted">raised of</small>
                                            <span class="text-dark" th:text="${@amountFormatter.formatAmount(program.goalAmount)}">200,000,000</span>
                                        </h4>
                                        <h4 class="text-primary mb-0 fw-bold" th:text="${program.percentageAchieved} + '%'">3%</h4>
                                    </div>

                                    <div class="progress">
                                        <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" th:style="'width:' + ${program.percentageAchieved} + '%'" th:aria-valuenow="${program.percentageAchieved}" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                </div>
                                
                                <!-- Tabs for Content Organization -->
                                <ul class="nav nav-tabs" id="programTabs" role="tablist">
                                    <li class="nav-item" role="presentation">
                                        <button class="nav-link active" id="about-tab" data-bs-toggle="tab" data-bs-target="#about" type="button" role="tab" aria-controls="about" aria-selected="true">About</button>
                                    </li>
                                    <li class="nav-item" role="presentation">
                                        <button class="nav-link" id="milestones-tab" data-bs-toggle="tab" data-bs-target="#milestones" type="button" role="tab" aria-controls="milestones" aria-selected="false">Milestones</button>
                                    </li>
                                    <li class="nav-item" role="presentation">
                                        <button class="nav-link" id="donors-tab" data-bs-toggle="tab" data-bs-target="#donors" type="button" role="tab" aria-controls="donors" aria-selected="false">Donors</button>
                                    </li>
                                </ul>
                                
                                <div class="tab-content" id="programTabsContent">
                                    <!-- About Section -->
                                    <div class="tab-pane fade show active" id="about" role="tabpanel" aria-labelledby="about-tab">
                                        <h4 class="section-title">About This Program</h4>
                                        <div class="program-description mb-4" th:text="${program.description}">Program Description</div>
                                        
                                        <div class="info-section">
                                            <h5 class="mb-3"><i class="fas fa-lightbulb text-primary me-2"></i> Program Goals</h5>
                                            <p>Our goal is to support students in need with necessary resources to continue their education without financial barriers.</p>
                                        </div>
                                    </div>
                                    
                                    <!-- Milestones Section -->
                                    <div class="tab-pane fade" id="milestones" role="tabpanel" aria-labelledby="milestones-tab">
                                        <h4 class="section-title">Program Timeline</h4>
                                        <ul class="timeline">
                                            <li>
                                                <div class="timeline-badge"><i class="fas fa-flag"></i></div>
                                                <div class="timeline-panel">
                                                    <div class="timeline-heading">
                                                        <span class="timeline-date">March 15, 2025</span>
                                                        <h5 class="timeline-title">Campaign Launch</h5>
                                                    </div>
                                                    <div class="timeline-body">
                                                        <p>Initial launch of the campaign with community event.</p>
                                                    </div>
                                                </div>
                                            </li>
                                            <li class="timeline-inverted">
                                                <div class="timeline-badge"><i class="fas fa-check"></i></div>
                                                <div class="timeline-panel">
                                                    <div class="timeline-heading">
                                                        <span class="timeline-date">April 30, 2025</span>
                                                        <h5 class="timeline-title">First Phase Goal</h5>
                                                    </div>
                                                    <div class="timeline-body">
                                                        <p>Reach 30% of funding goal to begin first distribution of resources.</p>
                                                    </div>
                                                </div>
                                            </li>
                                            <li>
                                                <div class="timeline-badge"><i class="fas fa-graduation-cap"></i></div>
                                                <div class="timeline-panel">
                                                    <div class="timeline-heading">
                                                        <span class="timeline-date">May 25, 2025</span>
                                                        <h5 class="timeline-title">Resources Distribution</h5>
                                                    </div>
                                                    <div class="timeline-body">
                                                        <p>Begin distributing resources to initial recipients.</p>
                                                    </div>
                                                </div>
                                            </li>
                                        </ul>
                                    </div>
                                    
                                    <!-- Donors Section -->
                                    <div class="tab-pane fade" id="donors" role="tabpanel" aria-labelledby="donors-tab">
                                        <h4 class="section-title">Recent Donors</h4>
                                        
                                        <!-- Sample Donor Avatars -->
                                        <div class="donor-list mb-4">
                                            <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="Donor" class="donor-avatar">
                                            <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="Donor" class="donor-avatar">
                                            <img src="https://randomuser.me/api/portraits/men/86.jpg" alt="Donor" class="donor-avatar">
                                            <img src="https://randomuser.me/api/portraits/women/63.jpg" alt="Donor" class="donor-avatar">
                                            <div class="donor-count" th:if="${program.donationCount > 4}">
                                                +<span th:text="${program.donationCount - 4}">146</span>
                                            </div>
                                        </div>
                                        
                                        <ul class="list-group list-group-flush">
                                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                                <div>
                                                    <strong>Anonymous</strong>
                                                    <small class="d-block text-muted">2 days ago</small>
                                                </div>
                                                <span class="badge bg-primary rounded-pill">1,000,000₫</span>
                                            </li>
                                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                                <div>
                                                    <strong>Nguyễn Văn A</strong>
                                                    <small class="d-block text-muted">5 days ago</small>
                                                </div>
                                                <span class="badge bg-primary rounded-pill">500,000₫</span>
                                            </li>
                                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                                <div>
                                                    <strong>Trần Thị B</strong>
                                                    <small class="d-block text-muted">1 week ago</small>
                                                </div>
                                                <span class="badge bg-primary rounded-pill">200,000₫</span>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Right Column - Donation Stats & Actions -->
                    <div class="col-lg-4">
                        <!-- Donation Statistics Cards -->
                        <div class="row g-4 mb-4">
                            <div class="col-12">
                                <div class="stats-card p-4">
                                    <div class="d-flex align-items-center">
                                        <div class="flex-shrink-0">
                                            <i class="fas fa-users fa-2x text-primary"></i>
                                        </div>
                                        <div class="flex-grow-1 ms-3">
                                            <div class="stats-value" th:text="${program.donationCount}">150</div>
                                            <div class="stats-label">Total Donors</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="stats-card p-4">
                                    <div class="d-flex align-items-center">
                                        <div class="flex-shrink-0">
                                            <i class="far fa-calendar-alt fa-2x text-primary"></i>
                                        </div>
                                        <div class="flex-grow-1 ms-3">
                                            <div class="stats-value" th:text="${program.remainingDays}">30</div>
                                            <div class="stats-label">Days Remaining</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="stats-card p-4">
                                    <div class="d-flex align-items-center">
                                        <div class="flex-shrink-0">
                                            <i class="fas fa-chart-line fa-2x text-primary"></i>
                                        </div>
                                        <div class="flex-grow-1 ms-3">
                                            <div class="stats-value" th:text="${program.percentageAchieved} + '%'">3%</div>
                                            <div class="stats-label">Funding Progress</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Donate Call to Action -->
                        <div class="donate-section text-center">
                            <h3 class="mb-4">Make a Difference Today!</h3>
                            <p class="mb-4">Your contribution can help students achieve their dreams. Join our mission to provide equal educational opportunities.</p>
                            <a class="btn btn-primary rounded-pill-btn btn-donate-now" th:href="@{/payment/{programId}(programId=${program.programId})}" th:classappend="${program.currentAmount >= program.goalAmount} ? 'disabled' : ''" th:attr="disabled=${program.currentAmount >= program.goalAmount}">
                                <i class="fas fa-heart me-2"></i>
                                Donate Now
                            </a>
                            <div class="mt-3" th:if="${program.currentAmount >= program.goalAmount}">
                                <div class="alert alert-success">
                                    <i class="fas fa-check-circle me-2"></i> Funding goal has been reached! Thank you for your support.
                                </div>
                            </div>
                        </div>
                        
                        <!-- Share Section -->
                        <div class="mt-4 text-center">
                            <h5 class="mb-3">Share This Campaign</h5>
                            <div class="d-flex justify-content-center gap-3">
                                <a href="#" class="btn btn-sm btn-outline-primary rounded-circle" title="Share on Facebook">
                                    <i class="fab fa-facebook-f"></i>
                                </a>
                                <a href="#" class="btn btn-sm btn-outline-info rounded-circle" title="Share on Twitter">
                                    <i class="fab fa-twitter"></i>
                                </a>
                                <a href="#" class="btn btn-sm btn-outline-danger rounded-circle" title="Share on Instagram">
                                    <i class="fab fa-instagram"></i>
                                </a>
                                <a href="#" class="btn btn-sm btn-outline-success rounded-circle" title="Share via Email">
                                    <i class="fas fa-envelope"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Related Programs Section -->
                <div class="content-section mt-5">
                    <h3 class="section-title">Related Programs</h3>
                    <div class="row g-4">
                        <!-- This would be populated with actual related programs -->
                        <div class="col-md-4">
                            <div class="card h-100">
                                <img class="card-img-top" src="https://via.placeholder.com/300x200" alt="Related program">
                                <div class="card-body">
                                    <h5 class="card-title">Educational Support Fund</h5>
                                    <div class="progress mt-3 mb-2" style="height: 10px">
                                        <div class="progress-bar" role="progressbar" style="width: 45%" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    <div class="d-flex justify-content-between">
                                        <small>45% Funded</small>
                                        <small>25 Days Left</small>
                                    </div>
                                </div>
                                <div class="card-footer text-center">
                                    <a href="#" class="btn btn-sm btn-outline-primary">Learn More</a>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card h-100">
                                <img class="card-img-top" src="https://via.placeholder.com/300x200" alt="Related program">
                                <div class="card-body">
                                    <h5 class="card-title">Scholarship Program</h5>
                                    <div class="progress mt-3 mb-2" style="height: 10px">
                                        <div class="progress-bar" role="progressbar" style="width: 65%" aria-valuenow="65" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    <div class="d-flex justify-content-between">
                                        <small>65% Funded</small>
                                        <small>15 Days Left</small>
                                    </div>
                                </div>
                                <div class="card-footer text-center">
                                    <a href="#" class="btn btn-sm btn-outline-primary">Learn More</a>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card h-100">
                                <img class="card-img-top" src="https://via.placeholder.com/300x200" alt="Related program">
                                <div class="card-body">
                                    <h5 class="card-title">School Supplies Drive</h5>
                                    <div class="progress mt-3 mb-2" style="height: 10px">
                                        <div class="progress-bar" role="progressbar" style="width: 30%" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    <div class="d-flex justify-content-between">
                                        <small>30% Funded</small>
                                        <small>40 Days Left</small>
                                    </div>
                                </div>
                                <div class="card-footer text-center">
                                    <a href="#" class="btn btn-sm btn-outline-primary">Learn More</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <th:block layout:fragment="scripts">
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                // Animated entrance for cards
                const elements = document.querySelectorAll('.stats-card, .program-detail-card, .content-section');
                elements.forEach((element, index) => {
                    element.style.opacity = '0';
                    element.style.transform = 'translateY(20px)';
                    element.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
                    
                    setTimeout(() => {
                        element.style.opacity = '1';
                        element.style.transform = 'translateY(0)';
                    }, 100 * index);
                });
                
                // Initialize tooltips
                var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
                var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
                    return new bootstrap.Tooltip(tooltipTriggerEl);
                });
                
                // Social media share functionality - placeholder
                document.querySelectorAll('.btn-outline-primary, .btn-outline-info, .btn-outline-danger, .btn-outline-success').forEach(btn => {
                    btn.addEventListener('click', function(e) {
                        e.preventDefault();
                        // This would be replaced with actual sharing functionality
                        alert('Share feature will be implemented soon!');
                    });
                });
            });
        </script>
    </th:block>
</body>
</html>